(function(){var a0='questlog',a1='#questlog_new',a2='[id*="questlog"]',a3='querySelector',a4='createElement',a5='div',a6='style',a7='cssText',a8='margin-top: 5px; text-align: center;',a9='button',aa='innerHTML',ab='https://i.ibb.co/RptK4TP5/teamrocketlogo.gif',ac='<img src="',ad='" style="width: 30px; height: 30px;">',ae='title',af='Daily Stats to Discord',ag='width: 40px; height: 40px; background: transparent; border: none; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; padding: 0;',ah='onclick',ai='preventDefault',aj='appendChild',ak='#header_info',al='href',am='#',an='" style="width: 20px; height: 20px; vertical-align: middle;">',ao='Daily Stats',ap='margin-left: 10px; padding: 5px; background: transparent; border: none; text-decoration: none; display: inline-block;',aq='position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 10000; display: flex; align-items: center; justify-content: center;',ar='background: #2C2F33; color: #DCDDDE; padding: 25px; border-radius: 8px; width: 550px; box-shadow: 0 8px 16px rgba(0,0,0,0.3);',as='body',at='getElementById',au='webhookUrl',av='value',aw='trim',ax='tw_discord_webhook',ay='getItem',az='setItem',ba='tw_auto_send_enabled',bb='true',bc='tw_auto_send_time',bd='23:00',be='autoSendEnabled',bf='checked',bg='autoSendTime',bh='disabled',bi='onchange',bj='statsPreview',bk='<p style="margin: 5px 0;"><strong>Loading stats...</strong></p>',bl='then',bm='troops',bn='keys',bo='length',bp='entries',bq='icon',br='<img src="',bs='" style="width: 18px; height: 18px; vertical-align: middle; margin-right: 4px;">',bt='<p style="margin: 2px 0; padding-left: 20px; font-size: 13px;">',bu='count',bv='</p>',bw='<p style="margin: 10px 0 5px 0; border-top: 1px solid #2C2F33; padding-top: 10px;"><strong>‚öîÔ∏è Total Troops at Home:</strong></p>',bx='playerName',by='farmTotal',bz='gatherTotal',ca='grandTotal',cb='<p style="margin: 5px 0;"><strong>üë§ Player:</strong> ',cc='<p style="margin: 5px 0;"><strong>üåæ Daily Farm Total:</strong> ',cd='<p style="margin: 5px 0;"><strong>üì¶ Daily Resources Total:</strong> ',ce='<p style="margin: 10px 0 5px 0; border-top: 1px solid #2C2F33; padding-top: 10px;"><strong>üí∞ Grand Total:</strong> ',cf='catch',cg='<p style="margin: 5px 0; color: #ED4245;"><strong>Error loading stats. Please try again.</strong></p>',ch='error',ci='Error gathering stats:',cj='closeBtn',ck='removeChild',cl='sendBtn',cm='<span style="color: #ED4245;">‚ùå Please enter a webhook URL</span>',cn='statusMsg',co='<span style="color: #FEE75C;">‚è≥ Sending...</span>',cp='target',cq='replace',cr='parseInt',cs='toLocaleString',ct='pt-PT',cu='N/A',cv='wood',cw='clay',cx='iron',cy='Unknown',cz='location',da='origin',db='pathname',dc='search',dd='toString',de='&screen=info_player',df='fetch',dg='text',dh='parseFromString',di='text/html',dj='textContent',dk='td.selected a[href*="screen=info_player"]',dl='table.vis.modemenu td.selected a',dm='#menu_row2 a[href*="screen=info_player"]:not([href*="id="])',dn='&screen=ranking&mode=in_a_day&type=loot_res',dp='#content_value',dq='match',dr=/O\s+meu\s+resultado\s+de\s+hoje:\s*([\d\s\.]+)/i,ds='#in_a_day_ranking_table tr.lit, #in_a_day_ranking_table tr.lit-item',dt='querySelectorAll',du='&screen=ranking&mode=in_a_day&type=scavenge',dv='&screen=overview_villages&mode=units',dw='#units_table thead tr',dx='forEach',dy='img[src*="unit"]',dz='src',ea=/unit_(\w+)\./,eb='spear',ec='Spear',ed='sword',ee='Sword',ef='axe',eg='Axe',eh='archer',ei='Archer',ej='spy',ek='Spy',el='light',em='Light Cav',en='marcher',eo='Mounted Archer',ep='heavy',eq='Heavy Cav',er='ram',es='Ram',et='catapult',eu='Catapult',ev='knight',ew='Paladin',ex='snob',ey='Noble',ez='https://dspt.innogamescdn.com/asset/caf5a096/graphic/unit/',fa='unit_',fb='.png',fc='#units_table tbody tr',fd='toLowerCase',fe='na aldeia',ff='log',fg='Found',fh='na aldeia rows',fi='Troop totals:',fj='Troops found:',fk='Error gathering stats:',fl='üë§ Player',fm='name',fn='inline',fo='üåæ Daily Farm Total',fp='üì¶ Daily Resources Total',fq='üí∞ Grand Total',fr='push',fs='‚öîÔ∏è Total Troops at Home',ft='üìä Tribal Wars Daily Report',fu='color',fv='fields',fw='timestamp',fx='toISOString',fy='footer',fz='Tribal Wars Stats Bot',ga='GM_xmlhttpRequest',gb='method',gc='POST',gd='url',ge='headers',gf='Content-Type',gg='application/json',gh='data',gi='stringify',gj='embeds',gk='onload',gl='status',gm='<span style="color: #57F287;">‚úÖ Successfully sent to Discord!</span>',gn='<span style="color: #ED4245;">‚ùå Error: ',go='onerror',gp='<span style="color: #ED4245;">‚ùå Failed to send. Check your webhook URL.</span>',gq='readyState',gr='loading',gs='addEventListener',gt='DOMContentLoaded',gu='getHours',gv='padStart',gw='getMinutes',gx='tw_last_auto_send',gy='toDateString',gz='tw_last_auto_send_time',ha='Auto-sending daily stats...',hb='getSeconds',hc='getMilliseconds',hd='ceil',he='setTimeout',hf='setInterval';function b0(){var b1=document[a3](a0+', '+a1+', '+a2);if(b1){var b2=document[a4](a5);b2[a6][a7]=a8;var b3=document[a4](a9);b3[aa]=ac+ab+ad;b3[ae]=af;b3[a6][a7]=ag;b3[ah]=function(b4){b4[ai]();b5();};b2[aj](b3);b1[aj](b2);}else{var b6=document[a3](ak);if(b6){var b7=document[a4]('a');b7[al]=am;b7[aa]=ac+ab+an;b7[ae]=ao;b7[a6][a7]=ap;b7[ah]=function(b8){b8[ai]();b5();};b6[aj](b7);}}}function b5(){var b9=document[a4](a5);b9[a6][a7]=aq;var c0=document[a4](a5);c0[a6][a7]=ar;c0[aa]='\n            <h2 style="margin-top: 0; color: #5865F2;">üìä Send Daily Stats to Discord</h2>\n            \n            <div style="margin-bottom: 15px;">\n                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Discord Webhook URL:</label>\n                <input type="text" id="webhookUrl" placeholder="https://discord.com/api/webhooks/..." \n                    style="width: 100%; padding: 8px; border: 1px solid #40444B; background: #40444B; color: #DCDDDE; border-radius: 4px; box-sizing: border-box;">\n            </div>\n\n            <div style="margin-bottom: 15px;">\n                <label style="display: block; margin-bottom: 5px;">\n                    <input type="checkbox" id="autoSendEnabled" style="margin-right: 5px;">\n                    <strong>Auto-send daily at:</strong>\n                </label>\n                <input type="time" id="autoSendTime" value="23:00" disabled\n                    style="width: 100%; padding: 8px; border: 1px solid #40444B; background: #40444B; color: #DCDDDE; border-radius: 4px; box-sizing: border-box;">\n                <p style="font-size: 12px; color: #B9BBBE; margin: 5px 0 0 0;">Leave the game open for auto-send to work</p>\n            </div>\n\n            <div id="statsPreview" style="background: #40444B; padding: 15px; border-radius: 4px; margin-bottom: 15px;">\n                <p style="margin: 5px 0;"><strong>Gathering stats...</strong></p>\n            </div>\n\n            <div style="display: flex; gap: 10px;">\n                <button id="sendBtn" style="flex: 1; padding: 10px; background: #5865F2; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: bold;">\n                    Send to Discord\n                </button>\n                <button id="closeBtn" style="flex: 1; padding: 10px; background: #ED4245; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: bold;">\n                    Close\n                </button>\n            </div>\n\n            <div id="statusMsg" style="margin-top: 15px; text-align: center; font-size: 14px;"></div>\n        ';b9[aj](c0);document[as][aj](b9);var c1=localStorage[ay](ax);var c2=localStorage[ay](ba)===bb;var c3=localStorage[ay](bc)||bd;if(c1){document[at](au)[av]=c1;}var c4=document[at](be);var c5=document[at](bg);c4[bf]=c2;c5[av]=c3;c5[bh]=!c2;c4[bi]=function(){c5[bh]=!c4[bf];localStorage[az](ba,c4[bf]);if(c4[bf]){localStorage[az](bc,c5[av]);d6();}};c5[bi]=function(){localStorage[az](bc,c5[av]);if(c4[bf]){d6();}};var c6=document[at](bj);c6[aa]=bk;c7()[bl](function(c8){var c9='';if(Object[bn](c8[bm])[bo]>0){c9=bw;for(var d0 of Object[bp](c8[bm])){var d1=d0[1][bq]?(br+d0[1][bq]+bs):'';c9+=bt+d1+d0[0]+': '+d0[1][bu]+bv;}}c6[aa]=cb+c8[bx]+bv+cc+c8[by]+bv+cd+c8[bz]+bv+ce+c8[ca]+bv+c9;})[cf](function(d2){c6[aa]=cg;console[ch](ci,d2);});document[at](cj)[ah]=function(){document[as][ck](b9);};document[at](cl)[ah]=async function(){var d3=document[at](au)[av][aw]();var d4=document[at](cn);if(!d3){d4[aa]=cm;return;}localStorage[az](ax,d3);d4[aa]=co;var d5=await c7();d7(d3,d5,d4);};b9[ah]=function(d8){if(d8[cp]===b9){document[as][ck](b9);}};}function d9(e0){if(!e0)return 0;var e1=e0[cq](/\s/g,'')[cq](/\./g,'')[cq](/[^\d]/g,'');return cr(e1)||0;}function e2(e3){return e3[cs](ct);}async function c7(){var e4={farmResources:{wood:cu,clay:cu,iron:cu},gatherResources:{wood:cu,clay:cu,iron:cu},farmTotal:cu,gatherTotal:cu,grandTotal:cu,playerName:cy,troops:{}};try{var e5=window[cz][da]+window[cz][db];var e6=new URLSearchParams(window[cz][dc]);var e7=await window[df](e5+'?'+e6[dd]()+de);var e8=await e7[dg]();var e9=new DOMParser()[dh](e8,di);var f0=e9[a3](dk);if(f0){e4[bx]=f0[dj][aw]();}if(e4[bx]===cy||!e4[bx]){var f1=e9[a3](dl);if(f1){e4[bx]=f1[dj][aw]();}}if(e4[bx]===cy||!e4[bx]){var f2=document[a3](dm);if(f2){e4[bx]=f2[dj][aw]();}}var f3=await window[df](e5+'?'+e6[dd]()+dn);var f4=await f3[dg]();var f5=new DOMParser()[dh](f4,di);var f6=f5[a3](dp);if(f6){var f7=f6[dj];var f8=f7[dq](dr);if(f8){var f9=d9(f8[1]);e4[by]=e2(f9);var g0=f5[a3](ds);if(g0){var g1=g0[dt]('td');if(g1[bo]>=5){var g2=d9(g1[2]?.[dj]);var g3=d9(g1[3]?.[dj]);var g4=d9(g1[4]?.[dj]);e4.farmResources[cv]=e2(g2);e4.farmResources[cw]=e2(g3);e4.farmResources[cx]=e2(g4);}}}}var g5=await window[df](e5+'?'+e6[dd]()+du);var g6=await g5[dg]();var g7=new DOMParser()[dh](g6,di);var g8=g7[a3](dp);if(g8){var g9=g8[dj];var h0=g9[dq](dr);if(h0){var h1=d9(h0[1]);e4[bz]=e2(h1);var h2=g7[a3](ds);if(h2){var h3=h2[dt]('td');if(h3[bo]>=5){var h4=d9(h3[2]?.[dj]);var h5=d9(h3[3]?.[dj]);var h6=d9(h3[4]?.[dj]);e4.gatherResources[cv]=e2(h4);e4.gatherResources[cw]=e2(h5);e4.gatherResources[cx]=e2(h6);}}}}if(e4[bz]!==cu&&e4[by]!==cu){var h7=d9(e4[bz]);var h8=d9(e4[by]);e4[ca]=e2(h7+h8);}var h9=await window[df](e5+'?'+e6[dd]()+dv);var i0=await h9[dg]();var i1=new DOMParser()[dh](i0,di);var i2=i1[a3](dw);var i3={};var i4=ez;if(i2){var i5=i2[dt]('th');i5[dx](function(i6,i7){var i8=i6[a3](dy);if(i8&&i8[dz]){var i9=i8[dz][dq](ea);if(!i9){i9=i8[dz][dq](/unit\/(\w+)\./)}if(!i9){i9=i8[dz][dq](/unit[_\/]([^._]+)/)}if(i9){var j0=i9[1];var j1={};j1[eb]=ec;j1[ed]=ee;j1[ef]=eg;j1[eh]=ei;j1[ej]=ek;j1[el]=em;j1[en]=eo;j1[ep]=eq;j1[er]=es;j1[et]=eu;j1[ev]=ew;j1[ex]=ey;if(j1[j0]){i3[i7]={name:j1[j0],icon:i4+fa+j0+fb}}}})}var j2=i1[dt](fc);var j3={};var j4=0;j2[dx](function(j5){var j6=j5[dt]('td');if(j6[bo]>0){var j7=j6[0][dj][aw]()[fd]();if(j7===fe){j4++;j6[dx](function(j8,j9){var k0=j9+1;if(i3[k0]){var k1=d9(j8[dj]);if(!j3[k0])j3[k0]=0;j3[k0]+=k1}})}}});console[ff](fg,j4,fh);console[ff](fi,j3);for(var k2 of Object[bp](j3)){var k3=i3[k2[0]];if(k3&&k2[1]>0){e4[bm][k3[fm]]={count:e2(k2[1]),icon:k3[bq]}}}console[ff](fj,e4[bm])}catch(k4){console[ff](fk,k4)}return e4}function d7(k5,k6,k7){var k8=[{name:fl,value:k6[bx],inline:false},{name:fo,value:k6[by],inline:true},{name:fp,value:k6[bz],inline:true},{name:fq,value:k6[ca],inline:false}];if(Object[bn](k6[bm])[bo]>0){var k9='';for(var l0 of Object[bp](k6[bm])){k9+=l0[0]+': '+l0[1][bu]+'\n'}k8[fr]({name:fs,value:k9[aw](),inline:false})}var l1={title:ft,color:0x58c27,fields:k8,timestamp:new Date()[fx](),footer:{text:fz}};window[ga]({method:gc,url:k5,headers:{'Content-Type':gg},data:JSON[gi]({embeds:[l1]}),onload:function(l2){if(l2[gl]===204){k7[aa]=gm}else{k7[aa]=gn+l2[gl]+bv}},onerror:function(l3){k7[aa]=gp}})}if(document[gq]===gr){document[gs](gt,function(){b0();d6()})}else{b0();d6()}function d6(){var l4=localStorage[ay](ba)===bb;var l5=localStorage[ay](bc)||bd;var l6=localStorage[ay](ax);if(!l4||!l6)return;var l7=function(){var l8=new Date();var l9=String(l8[gu]())[gv](2,'0')+':'+String(l8[gw]())[gv](2,'0');var m0=localStorage[ay](gx);var m1=localStorage[ay](gz);var m2=l8[gy]();if(l9===l5&&!(m0===m2&&m1===l5)){console[ff](ha);c7()[bl](function(m3){d7(l6,m3,{innerHTML:function(){}});localStorage[az](gx,m2);localStorage[az](gz,l5)})}};var m4=new Date();var m5=m4[gw]();var m6=m4[hb]();var m7=m4[hc]();var m8=Math[hd](m5/10)*10;var m9=(m8-m5)%60;var n0=(m9*60-m6)*1000-m7;window[he](function(){l7();window[hf](l7,600000)},n0)}})();
